<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
      crossorigin="anonymous"
    />
    <title>Vue Introduction</title>
  </head>
  <body>
    <div id="app">
      <!-- NAVBAR -->
      <nav class="navbar navbar-expand-lg bg-dark navbar-dark">
        <div class="container-fluid">
          <div>
            <img
              src="https://assets.stickpng.com/images/58482acecef1014c0b5e4a1e.png"
              height="30"
              width="30"
              class="mx-2"
            />
            <a class="navbar-brand">Vue Introduction</a>
            <p></p>
          </div>

          <button
            id="button-logout"
            class="btn btn-outline-danger"
            v-if="page !== 'login'"
            @click="changePage('login')"
          >
            Logout
          </button>
        </div>
      </nav>

      <!-- LOGIN PAGE -->
      <section
        v-if="page === 'login'"
        id="login-page"
        style="width: 40vw; margin: auto; margin-top: 20px"
      >
        <h1>Login Page</h1>
        <form id="form-login" v-on:submit.prevent="loginHandler">
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label"
              >Email address</label
            >
            <input
              type="email"
              class="form-control"
              id="input-login-email"
              aria-describedby="emailHelp"
              v-model="emailLogin"
            />
            <div id="emailHelp" class="form-text">
              We'll never share your email with anyone else.
            </div>
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
      </section>

      <!-- HOME PAGE -->
      <section
        v-show="page === 'home'"
        id="home-page"
        style="width: 50vw; margin: auto; margin-top: 20px"
      >
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <h1>Home Page</h1>
          <button class="btn btn-primary" @click="changePage('create')">
            + Add
          </button>
        </div>

        <table class="table table-striped">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Image</th>
              <th scope="col">Title</th>
              <th scope="col">Description</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody id="table-body">
            <!-- TABLE ROW -->
            <tr v-for="(item, i) in items" :key="i">
              <td><h5>{{i + 1}}</h5></td>
              <td>
                <img
                  :src="item.image_url"
                  style="width: 180px; height: 250px; object-fit: cover"
                />
              </td>
              <td>{{item.name}}</td>
              <td>{{item.description}}</td>
              <td>
                <button @click="deleteHandler(item.id)" class="btn btn-danger">
                  delete
                </button>
              </td>
            </tr>
            <!-- TABLE ROW -->
          </tbody>
        </table>
      </section>
      <!--  -->

      <!-- CREATE PAGE -->
      <section
        v-if="page === 'create'"
        id="create-page"
        style="width: 40vw; margin: auto; margin-top: 20px; margin-bottom: 40px"
      >
        <h1>Create Page</h1>
        <form class="form-create" @submit.prevent="createItem">
          <div class="mb-3">
            <label class="form-label">Image Url</label>
            <input
              id="image-url"
              type="text"
              class="form-control"
              v-model="newItem.image_url"
            />
          </div>
          <div class="mb-3">
            <label class="form-label">Title</label>
            <input
              id="title"
              type="text"
              class="form-control"
              v-model="newItem.name"
            />
          </div>
          <label class="form-label">Description</label>
          <select class="form-select mb-4" v-model="newItem.description">
            <option selected disabled>-- select description --</option>
            <option value="People">People</option>
            <option value="Film">Film</option>
            <option value="Other">Other</option>
          </select>
          <button type="submit" class="btn btn-success">Add!</button>
          <button
            type="button"
            class="btn btn-secondary mx-2"
            @click="changePage('home')"
          >
            Cancel
          </button>
        </form>
      </section>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>
      console.log("halo jalan bosss");

      const { createApp } = Vue;

      // data = state
      // conditional rendering => v-if v-else-if v-else
      // v-show = berguna disaat ada konfigurasi yang di trigger di awal aplikasi di create

      // EVENT HANDLER V-ON
      // sifat alaminya si form dan anchor => nge refresh

      // V-MODEL
      // v-model merupakan two way binding => pasangin si input dengan state

      // CREATE
      // bikin v-model => event handler => rubah state items
      createApp({
        data() {
          return {
            message: "Hello Vue!",
            introduction: "ini intro",
            page: "home",
            emailLogin: "",
            items: [
              // items bakal diisi setelah fetch data ke server
              {
                id: 1,
                name: "Lisa Blackpink",
                description: "People",
                image_url:
                  "https://i.pinimg.com/originals/f8/0a/35/f80a3595f384622c45242d0da7c0b3bf.jpg",
              },
              {
                id: 2,
                name: "Saras 008",
                description: "Film",
                image_url:
                  "https://upload.wikimedia.org/wikipedia/id/7/70/Saras_008_%28Poster%29.jpg",
              },
              {
                id: 3,
                name: "Twenty Five Twenty One",
                description: "Film",
                image_url:
                  "https://upload.wikimedia.org/wikipedia/id/thumb/1/15/Twenty-Five_Twenty-One.jpg/250px-Twenty-Five_Twenty-One.jpg",
              },
            ],
            newItem: {
              name: "",
              image_url: "",
              description: "",
            },
          };
        },
        methods: {
          createItem() {
            let temp = {
              id: this.items[this.items.length - 1].id + 1,
              ...this.newItem,
            };
            this.items.push(temp);
            this.changePage("home");
          },

          deleteHandler(id) {
            let temp = this.items.filter((el) => {
              return el.id !== id;
            });
            this.items = temp;
            // hit server method delete => fetch ulang
          },

          fetchItems() {
            // hit server => pasang data response nya ke state
          },
          loginHandler() {
            // console.log("ke trigger login nya");
            // this.page = "home";

            // ajax
            // AXIOS

            console.log(this.emailLogin);
            // axios ke server
            // then
            this.changePage("home");
          },

          changePage(string) {
            this.page = string;
          },
        },
      }).mount("#app");
    </script>
  </body>
</html>
